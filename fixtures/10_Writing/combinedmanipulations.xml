<?xml version="1.0" encoding="UTF-8"?>
<sv:node xmlns:crx="http://www.day.com/crx/1.0" xmlns:mix="http://www.jcp.org/jcr/mix/1.0" xmlns:nt="http://www.jcp.org/jcr/nt/1.0" xmlns:fn="http://www.w3.org/2005/xpath-functions" xmlns:fn_old="http://www.w3.org/2004/10/xpath-functions" xmlns:vlt="http://www.day.com/jcr/vault/1.0" xmlns:xs="http://www.w3.org/2001/XMLSchema" xmlns:jcr="http://www.jcp.org/jcr/1.0" xmlns:sv="http://www.jcp.org/jcr/sv/1.0" xmlns:rep="internal" sv:name="tests_write_combined_manipulation">
  <sv:property sv:name="jcr:primaryType" sv:type="Name">
    <sv:value>nt:unstructured</sv:value>
  </sv:property>
  <sv:property sv:name="jcr:created" sv:type="Date">
    <sv:value>2009-04-27T13:00:54.082+02:00</sv:value>
  </sv:property>

  <sv:node sv:name="testAddAndRemove">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
  </sv:node>

  <sv:node sv:name="testRemoveAndAdd">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:node sv:name="child">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:unstructured</sv:value>
      </sv:property>
    </sv:node>
  </sv:node>

    <sv:node sv:name="testRemoveSaveAndAdd">
        <sv:property sv:name="jcr:primaryType" sv:type="Name">
            <sv:value>nt:unstructured</sv:value>
        </sv:property>
        <sv:node sv:name="child">
            <sv:property sv:name="jcr:primaryType" sv:type="Name">
                <sv:value>nt:unstructured</sv:value>
            </sv:property>
        </sv:node>
    </sv:node>

  <sv:node sv:name="testRemoveAndAddAndRemove">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:node sv:name="child">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:unstructured</sv:value>
      </sv:property>
    </sv:node>
  </sv:node>

  <sv:node sv:name="testAddAndRemoveAndAdd">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
  </sv:node>

  <!-- this test will create its own node, but sanity checks test for this node to exist -->
  <sv:node sv:name="testRemoveAndAddToplevelNode">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
  </sv:node>

  <sv:node sv:name="testRemoveAndMove">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:node sv:name="other">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:folder</sv:value>
      </sv:property>
    </sv:node>
    <sv:node sv:name="parent">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:unstructured</sv:value>
      </sv:property>
      <sv:node sv:name="child">
        <sv:property sv:name="jcr:primaryType" sv:type="Name">
          <sv:value>nt:unstructured</sv:value>
        </sv:property>
      </sv:node>
    </sv:node>
  </sv:node>

    <sv:node sv:name="testAddAndChildAddAndMove">
        <sv:property sv:name="jcr:primaryType" sv:type="Name">
            <sv:value>nt:unstructured</sv:value>
        </sv:property>
        <sv:node sv:name="existing">
            <sv:property sv:name="jcr:primaryType" sv:type="Name">
                <sv:value>nt:unstructured</sv:value>
            </sv:property>
        </sv:node>
        <sv:node sv:name="node">
            <sv:property sv:name="jcr:primaryType" sv:type="Name">
                <sv:value>nt:unstructured</sv:value>
            </sv:property>
        </sv:node>
    </sv:node>

  <sv:node sv:name="testSessionHasPendingChanges">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:property sv:name="prop" sv:type="String">
      <sv:value>Old</sv:value>
    </sv:property>
  </sv:node>

  <sv:node sv:name="testSimpleSessionRefresh">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:property sv:name="prop" sv:type="String">
      <sv:value>Old</sv:value>
    </sv:property>
  </sv:node>

  <sv:node sv:name="testSimpleSessionRefreshKeepChanges">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:property sv:name="prop" sv:type="String">
      <sv:value>Old</sv:value>
    </sv:property>
    <sv:property sv:name="mod" sv:type="String">
      <sv:value>Old</sv:value>
    </sv:property>
  </sv:node>

  <sv:node sv:name="testRemoveSessionRefresh">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:property sv:name="prop" sv:type="String">
      <sv:value>Old</sv:value>
    </sv:property>
    <sv:node sv:name="child">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:unstructured</sv:value>
      </sv:property>
    </sv:node>
  </sv:node>

  <sv:node sv:name="testRemoveSessionRefreshKeepChanges">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:property sv:name="prop" sv:type="String">
      <sv:value>Old</sv:value>
    </sv:property>
    <sv:node sv:name="child">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:unstructured</sv:value>
      </sv:property>
    </sv:node>
  </sv:node>

  <sv:node sv:name="testRemoveOtherSessionRefreshKeepChanges">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:property sv:name="prop" sv:type="String">
      <sv:value>Old</sv:value>
    </sv:property>
    <sv:node sv:name="child">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:unstructured</sv:value>
      </sv:property>
      <sv:property sv:name="childprop" sv:type="String">
        <sv:value>whatever</sv:value>
      </sv:property>
    </sv:node>
    <sv:node sv:name="childnode">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:unstructured</sv:value>
      </sv:property>
    </sv:node>
  </sv:node>

  <sv:node sv:name="testMoveSessionRefresh">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:node sv:name="src">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:unstructured</sv:value>
      </sv:property>
      <sv:node sv:name="child">
        <sv:property sv:name="jcr:primaryType" sv:type="Name">
          <sv:value>nt:unstructured</sv:value>
        </sv:property>
      </sv:node>
    </sv:node>
    <sv:node sv:name="target">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:unstructured</sv:value>
      </sv:property>
    </sv:node>

  </sv:node>

  <sv:node sv:name="testMoveSessionRefreshKeepChanges">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:node sv:name="src">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:unstructured</sv:value>
      </sv:property>
      <sv:node sv:name="child">
        <sv:property sv:name="jcr:primaryType" sv:type="Name">
          <sv:value>nt:unstructured</sv:value>
        </sv:property>
      </sv:node>
    </sv:node>
    <sv:node sv:name="target">
      <sv:property sv:name="jcr:primaryType" sv:type="Name">
        <sv:value>nt:unstructured</sv:value>
      </sv:property>
    </sv:node>
  </sv:node>

  <sv:node sv:name="testAddSessionRefresh">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
  </sv:node>

  <sv:node sv:name="testAddSessionRefreshKeepChanges">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:property sv:name="prop" sv:type="String">
      <sv:value>Old</sv:value>
    </sv:property>
  </sv:node>

  <sv:node sv:name="testNodeRevert">
    <sv:property sv:name="jcr:primaryType" sv:type="Name">
      <sv:value>nt:unstructured</sv:value>
    </sv:property>
    <sv:property sv:name="prop" sv:type="String">
      <sv:value>Old</sv:value>
    </sv:property>
  </sv:node>

</sv:node>
